---
title: WordPressテーマの次に作りたいもの
author: wkwkrnht
type: post
date: 2016-09-22T15:22:48+00:00
excerpt: 2016-by-wkwkrnhtの次に作りたい、オレオレなタイムライン式更新一覧サイトの話。
url: /delusion/472/

---
とりあえずのメモ程度に。ただいま、<a href="http://wkwkrnht.gegahost.net/rss" target="_blank" rel="noopener">こちら</a>で試験中のサイト更新タイムライン。これを汎用的に、XSSなやつを解消して実装したい！そしてその流れで、Twitter連携までしたいというのがありまして。ちょこちょこ調べていたんですけど。
  
<https://github.com/FriendsOfPHP/Goutte>{.embedly-card}

こんなものを見つけてしまったものですから、やるしかないと。どういうやつかってのは、CSSセレクタベースのサイトスクレイピングPHPライブラリな感じでしょうか。私としては、親しみが若干あるPHPでできる上に、CSSセレクタベースというのが、キュンキュン来るポイントです。

###### 参考記事

<div class="ogp-blogcard">
  <div id="ogp-blogcard-share-http://qiita.com/mojibakeo/items/ba38e6709356562b284a" class="ogp-blogcard-share none">
    <a href="javascript:void(0)" class="ogp-blogcard-share-close" tabindex="0" onclick="document.getElementById('ogp-blogcard-share-http://qiita.com/mojibakeo/items/ba38e6709356562b284a').classList.toggle('none');document.getElementById('ogp-blogcard-share-http://qiita.com/mojibakeo/items/ba38e6709356562b284a').classList.toggle('block');">×</a> 
    
    <ul>
      <li>
        <a href="https://twitter.com/share?url=http%3A%2F%2Fqiita.com%2Fmojibakeo%2Fitems%2Fba38e6709356562b284a&text=PHP と Goutte ではじめる超絶簡単クローラー入門 - Qiita" target="_blank" rel="noopener" tabindex="0"><i class="fa fa-twitter" aria-hidden="true"></i></a>
      </li>
      <li>
        <a href="http://www.facebook.com/share.php?u=http%3A%2F%2Fqiita.com%2Fmojibakeo%2Fitems%2Fba38e6709356562b284a" target="_blank" rel="noopener" tabindex="0"><i class="fa fa-thumbs-up" aria-hidden="true"></i></a>
      </li>
      <li>
        <a href="http://getpocket.com/edit?url=http%3A%2F%2Fqiita.com%2Fmojibakeo%2Fitems%2Fba38e6709356562b284a&title=PHP と Goutte ではじめる超絶簡単クローラー入門 - Qiita" target="_blank" rel="noopener" tabindex="0"><i class="fa fa-get-pocket" aria-hidden="true"></i></a>
      </li>
      <li>
        <a href="http://b.hatena.ne.jp/add?mode=confirm&url=http%3A%2F%2Fqiita.com%2Fmojibakeo%2Fitems%2Fba38e6709356562b284a&title=PHP と Goutte ではじめる超絶簡単クローラー入門 - Qiita" target="_blank" rel="noopener" tabindex="0">B!</a>
      </li>
    </ul>
  </div>
  
  <blockquote class="ogp-blogcard-main" cite="http://qiita.com/mojibakeo/items/ba38e6709356562b284a">
    <img class="ogp-blogcard-img" src="http://cdn.qiita.com/assets/qiita-fb-2887e7b4aad86fd8c25cea84846f2236.png" /> <a href="http://qiita.com/mojibakeo/items/ba38e6709356562b284a" target="_blank" rel="noopener" tabindex="0" title="PHP と Goutte ではじめる超絶簡単クローラー入門 - Qiita" class="ogp-blogcard-info"> 
    
    <h2 class="ogp-blogcard-title">
      PHP と Goutte ではじめる超絶簡単クローラー入門 - Qiita
    </h2>
    
    <p class="ogp-blogcard-description">
      ※ 追記 ぞくへんかきました [PHP と Goutte ではじめる超絶簡単クローラー入門 ログイン編](http://qiita.com/mojibakeo/items/be68498764909a66f126) # Goutte...
    </p></a>
  </blockquote>
  
  <a href="javascript:void(0)" class="ogp-blogcard-share-toggle" tabindex="0" onclick="document.getElementById('ogp-blogcard-share-http://qiita.com/mojibakeo/items/ba38e6709356562b284a').classList.toggle('none');document.getElementById('ogp-blogcard-share-http://qiita.com/mojibakeo/items/ba38e6709356562b284a').classList.toggle('block');"><i class="fa fa-2x fa-share-alt"></i></a>
</div>


  


<div class="ogp-blogcard">
  <div id="ogp-blogcard-share-http://reafo.net/?p=896" class="ogp-blogcard-share none">
    <a href="javascript:void(0)" class="ogp-blogcard-share-close" tabindex="0" onclick="document.getElementById('ogp-blogcard-share-http://reafo.net/?p=896').classList.toggle('none');document.getElementById('ogp-blogcard-share-http://reafo.net/?p=896').classList.toggle('block');">×</a> 
    
    <ul>
      <li>
        <a href="https://twitter.com/share?url=http%3A%2F%2Freafo.net%2F%3Fp%3D896&text=Goutte スクレイピング解析時のスニペットメモ" target="_blank" rel="noopener" tabindex="0"><i class="fa fa-twitter" aria-hidden="true"></i></a>
      </li>
      <li>
        <a href="http://www.facebook.com/share.php?u=http%3A%2F%2Freafo.net%2F%3Fp%3D896" target="_blank" rel="noopener" tabindex="0"><i class="fa fa-thumbs-up" aria-hidden="true"></i></a>
      </li>
      <li>
        <a href="http://getpocket.com/edit?url=http%3A%2F%2Freafo.net%2F%3Fp%3D896&title=Goutte スクレイピング解析時のスニペットメモ" target="_blank" rel="noopener" tabindex="0"><i class="fa fa-get-pocket" aria-hidden="true"></i></a>
      </li>
      <li>
        <a href="http://b.hatena.ne.jp/add?mode=confirm&url=http%3A%2F%2Freafo.net%2F%3Fp%3D896&title=Goutte スクレイピング解析時のスニペットメモ" target="_blank" rel="noopener" tabindex="0">B!</a>
      </li>
    </ul>
  </div>
  
  <blockquote class="ogp-blogcard-main" cite="http://reafo.net/?p=896">
    <img class="ogp-blogcard-img" src="http://reafo.net/x_room/wp3/wp-content/uploads/2014/01/eyechatch1.png" /> <a href="http://reafo.net/?p=896" target="_blank" rel="noopener" tabindex="0" title="Goutte スクレイピング解析時のスニペットメモ" class="ogp-blogcard-info"> 
    
    <h2 class="ogp-blogcard-title">
      Goutte スクレイピング解析時のスニペットメモ
    </h2>
    
    <p class="ogp-blogcard-description">
      Goutteをいろいろいじったので備忘録。 classが２つあるタグを取得する html : <div &
    </p></a>
  </blockquote>
  
  <a href="javascript:void(0)" class="ogp-blogcard-share-toggle" tabindex="0" onclick="document.getElementById('ogp-blogcard-share-http://reafo.net/?p=896').classList.toggle('none');document.getElementById('ogp-blogcard-share-http://reafo.net/?p=896').classList.toggle('block');"><i class="fa fa-2x fa-share-alt"></i></a>
</div>

前回の奴は、ソース公開すらしてないのでややこしいことになってますけど、今回は、ちゃんと逐一Github上に公開する感じにしていきたいと思います。あとは、できたらJSONベースでデータベース化してそのデータベースをもとに表示とかできたらいいな。とか。

## 理想サイクル

  1. 定期的にあるサイトをスクレイピング(ここはCronジョブに)
  2. 最新情報かどうか
  3. 最新情報じゃなかったら終了
  4. 最新情報ならそれをもとに、
  1. Twitterに共有
  2. JSONデータ作成→保存

  5. 非同期的にJSONデータをもとに、HTML+CSSでサイト表示

## まとめ

あくまでも、できたらいいなぁぐらいのあれです。でも、頑固な私のことだからやろうとして、途中で泣いてますね。たぶん。このスクリプトができたら、プロフィールページを公開します。約束はできないですが。まずは、それぞれの処理を、もっと小分けにして具体化して組み立てるところからかなぁ。へっぽこコーダーですけど、胸を張って、自慢できる作品を増やしていきたいところです。